
## Ch14. 작업 절차를 자동화 (셸 스크립트)

- 셸 스크림트는 셸 작업을 자동화하도록 만든 각본 같은 것
- 실제로는 단순한 텍스트 파일로 내부는 명령어 실행 절차가 적혀 있다
- 이를 사용해서 명령어를 직접 순서대로 실행하는 대신에 셸이 실행하도록 맡긴다
- 예를 들어 아래 처럼

```
echo -n "2134"
rm -rf $WORD

cp /etc/a /var/lib

```

- echo : 인수로 지정된 문자열을 그대로 화면에 출력
    - -n : 새로 개행하지 않고 출력한다
- rm : 파일이나 디렉토리를 삭제할 때 사용하는 명령어
    - -f : 강제로 파일이나 디렉토리를 삭제하고 삭제할 대상이 없을 경우 메세지를 출력하지 않음
    - -r : 하위 디렉토리 포함하여 모든 내용을 삭제
- cp file1 file2 : file1 파일을 똑같이 복사하여 file2 파일을 생성한다 
- cp file1 dir1/ : 목적지로 디렉토리를 사용하면 파일을 디렉토리 안에 복사한다

- 파이프라인이 명령어를 옆으로 연결한 거라면 셸 스크립트는 명령어를 세로로 연결한 것

<hr>

- setup.sh 라는 파일 만든다음에 
- vim 사용해서 첫번째 줄에 #!/bin/bash라고 입력한다
- 이는 셔뱅(shebang 또는 Hashbang)으로 스크립트를 실행하는 프로그램(인터프리터)를 지정하는 것이다
- 뒤에 프로그램 전체 경로를 적으면 스크립트를 싱행하는 프로그램을 셸이 자동으로 전환해 준다
- 셔뱅 아래에 실행하고자 하는 명령어를 입력한다 


- /usr/bin/perl
- /usr/bin/ruby1.9.1
- /bin/bash : bash 자체의 전체 경로, 즉 bash용 스크립트를 나타낸다
- 셸 스크립트는 bash나 zsh 같은 셸로 실행하는 총칭이다


- 스크립트를 만들고 나면 실행 권한을 준다 
- 실행권한이 없는 파일을 실행하려고 하면 허가 되지 않았다는 에러 발생
- 새로만든 셸 스크립트는 아직 실행 권한이 없으므로 chmod 명령어로 권한을 설정한다

```
$ chmod +x setup.sh

$ ./setup.sh
```

- 파일명을 쳐서 명렁어 실행이 가능한 건 파일이 /bin/이나 /usr/bin/같이 특별한 장소에 있을 때 뿐이다 
- 그 외의 장소에 있는 파일을 실행하려면 경로를 제대로 지정해야 한다 

<hr>

- 셸 스크립트를 작성할 때 실패할 경우 그 뒤의 처리에 영향이 가는 명령어가 있다면 그 다음줄에 아래와 같은 명렁어를 추가한다

```
if [$? != 0]; then exit; fi

```

-  [$? != 0] : 이전 명령어가 정상종료 했는지 확인
-  then exit : 이상 종료했으면 스크립트 실행을 중단하기 

- bash용 셸 스크립트를 작성하려면 텍스트 파일 첫 줄에 #!/bin/bash라고 적고 두 번째 줄 이후는 자동실행하고 싶은 명령어를 작성한다
- 셸 스크립트는 chmod +x 파일명으로 실행 권한을 설정한다
- 명령어가 이상이 생겨서 그 시점에서 스크립트 실행을 중단하고 싶을 땐 if[$? !=0]; then exit; fi 라고 적는다


## Reference

  - [만화로 배우는 리눅스 시스템 관리](http://www.yes24.com/Product/Goods/32402055?Acode=101)
